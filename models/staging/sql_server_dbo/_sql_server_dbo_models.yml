version: 2

models:
  - name: stg_sql_server_dbo__addresses
    description: "collect data on addresses that affect our business"
    columns:
      - name: address_id
        data_type: varchar
        description: "primary key: address"

      - name: zipcode
        data_type: number
        description: "5-digit numbers developed by the United States Postal Service to represent individual post offices across the United States"

      - name: country
        data_type: varchar
        description: "country"

      - name: address
        data_type: varchar
        description: "Number and street"

      - name: state
        data_type: varchar
        description: "state"

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"

  - name: stg_sql_server_dbo__event_type
    description: "Collects al the possible actions that a user can do"
    columns:
      - name: event_type_id
        data_type: varchar
        description: "primary key: event type"

      - name: event_type
        data_type: varchar
        description: "event type name"

  - name: stg_sql_server_dbo__events
    description: "An event is any type of action that a user can do on our business website. This table collects the data of all the events performed"
    columns:
      - name: event_id
        data_type: varchar
        description: "primary key: event"

      - name: page_url
        data_type: varchar
        description: "URL of the page to which the event takes place"

      - name: event_type_id
        data_type: varchar
        description: "Foreign key: event type"

      - name: user_id
        data_type: varchar
        description: "Foreign key: user"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__users')
                  field: user_id

      - name: product_id
        data_type: varchar
        description: "Foreign key: product"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__products')
                  field: product_id

      - name: session_id
        data_type: varchar
        description: "Key of the session in which the event took place"

      - name: created_at
        data_type: date
        description: "timestamp indicating when the event was created"

      - name: order_id
        data_type: varchar
        description: "Foreign key: order"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__orders')
                  field: order_id

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"

  - name: stg_sql_server_dbo__order_items
    description: "associates orders and products sold for each order"
    columns:
      - name: order_id
        data_type: varchar
        description: "Foreign key: order"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__orders')
                  field: order_id

      - name: product_id
        data_type: varchar
        description: "Foreign key: product"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__products')
                  field: product_id

      - name: quantity
        data_type: number
        description: "Quantity of the same product sold in the same order"

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"

  - name: stg_sql_server_dbo__orders
    description: "Collects all data associated with an order"
    columns:
      - name: order_id
        data_type: varchar
        description: "primary key: orders"

      - name: user_id
        data_type: varchar
        description: "Foreign key: user"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__users')
                  field: user_id

      - name: shipping_cost
        data_type: float
        description: "additional cost associated with shipping"

      - name: address_id
        data_type: varchar
        description: "Foreign key: address"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__addresses')
                  field: address_id

      - name: created_at
        data_type: date
        description: "timestamp indicating when the order was created"

      - name: promo_id
        data_type: varchar
        description: "Foreign key: promo"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__promos')
                  field: promo_id

      - name: order_cost
        data_type: float
        description: "Total cost of the products sold without additional shipping costs"

      - name: order_total
        data_type: float
        description: "Total cost including shipping costs"

      - name: tracking_id
        data_type: varchar
        description: "Foreign key: tracking"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__tracking')
                  field: tracking_id

      - name: tracking_status_id
        data_type: number
        description: "Foreign key: traking status"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__tracking_status')
                  field: tracking_status_id

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"

  - name: stg_sql_server_dbo__products
    description: "Collects all data associated with the products sold in the company"
    columns:
      - name: product_id
        data_type: varchar
        description: "primary key: product"

      - name: price
        data_type: float
        description: "price of the product"

      - name: name
        data_type: varchar
        description: "name of the product"

      - name: inventory
        data_type: number
        description: "number of units of the product in stock"

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"

  - name: stg_sql_server_dbo__promos
    description: "Collects data on promotions that the company has ever carried out"
    columns:
      - name: promo_id
        data_type: varchar
        description: "primary key: promo"

      - name: description
        data_type: varchar
        description: "name of the promotion"

      - name: discount_dollars
        data_type: number
        description: "total dollar discount"

      - name: status_id
        data_type: number
        description: "Foreign key: promo status"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__status')
                  field: status_id

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"

  - name: stg_sql_server_dbo__shipping_service
    description: "Collects the names of the companies that carry out the shipment"
    columns:
      - name: shipping_service_id
        data_type: varchar
        description: "primary key: shipping service"

      - name: shipping_service
        data_type: varchar
        description: "name of the company that carry out the shipment"

  - name: stg_sql_server_dbo__status
    description: "Collects the type of the status of promotions (active/inactive)"
    columns:
      - name: status_id
        data_type: number
        description: "primary key: promo status (0/1)"

      - name: description
        data_type: varchar
        description: "type of status: active/inactive"

  - name: stg_sql_server_dbo__tracking
    description: "Collects the data specific to the shipment"
    columns:
      - name: tracking_id
        data_type: varchar
        description: "primary key: tracking"

      - name: shipping_service_id
        data_type: varchar
        description: "Foreign key: shipping service"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__shipping_service')
                  field: shipping_service_id

      - name: estimated_delivery_at
        data_type: timestamp_tz
        description: "estimated date of delivery"

      - name: delivered_at
        data_type: timestamp_tz
        description: "Date of actual delivery"

  - name: stg_sql_server_dbo__tracking_status
    description: "Collects shipping status types."
    columns:
      - name: tracking_status_id
        data_type: number
        description: "primary key: tracking status"

      - name: description
        data_type: varchar
        description: "type of status: preparing, shipped, delivered"

  - name: stg_sql_server_dbo__users
    description: "Collects all users' own data"
    columns:
      - name: user_id
        data_type: varchar
        description: "primary key: user"

      - name: first_name
        data_type: varchar
        description: "User's first name"

      - name: last_name
        data_type: varchar
        description: "User's last name"

      - name: email
        data_type: varchar
        description: "User's email"

      - name: address_id
        data_type: varchar
        description: "Foreign key: address"
        tests:
          - relationships:
                  to: ref('stg_sql_server_dbo__addresses')
                  field: address_id

      - name: created_at
        data_type: date
        description: "Date of creation of the user record"

      - name: updated_at
        data_type: date
        description: "Date of update od user data"

      - name: phone_number
        data_type: varchar
        description: "User's phone number"

      - name: total_orders
        data_type: number
        description: "User's total orders"

      - name: date_deleted
        data_type: boolean
        description: "T/F whether or not it has been deleted in the operational database"

      - name: date_load
        data_type: timestamp_tz
        description: "Data upload timestamp"